using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Clicker1 : MonoBehaviour{
    bool active = false;
    GameObject note;
	GameObject holdNote;
    GameManager gm;
	private Camera cam;
    void Awake(){
		gm = GameObject.Find("_GameManager").GetComponent<GameManager>();
		 cam = Camera.main;}
    void Start (){
        gm = GameObject.Find("_GameManager").GetComponent<GameManager>();
		
    }     
        
        
    void OnMouseDown(){
		gm = GameObject.Find("_GameManager").GetComponent<GameManager>();
        if(active && note.tag=="Note"){
			Debug.Log("clicked Note");
			Destroy(note);
            gm.Score();
			}//endinnerif 
			/* the other cases will be handeled in the dragger script, because all other combos require
			a collision from another note */
	}
	
	
	void OnMouseDrag(){
		if (active == true && note.tag=="HoldNote"){
			Destroy(note);
            gm.Score();
		}
	}
        
    public void OnTriggerEnter2D(Collider2D collision){
        if(collision.gameObject.tag == "Note"){
            note = collision.gameObject;
            active = true;
			
        }if(collision.gameObject.tag == "HoldNote"){
            active = true;
        }
    }
        
    public void OnTriggerExit2D(Collider2D collision){
        active = false;
    }
	
	Vector3 GetMousePos(){
		var mousePos = cam.ScreenToWorldPoint(Input.mousePosition);
		mousePos.z=0;
		return mousePos;	
	}
	
}